(self.webpackChunkgulp_html_scss=self.webpackChunkgulp_html_scss||[]).push([[697],{953:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});class a{static modalSearchMod(e){e.upgrade=function(){return document.querySelector(".aBody").addEventListener("click",(e=>{let t=e.target;(t&&t.matches(this._trigger)||t&&t.parentElement?.matches(this._trigger))&&document.querySelector(".aBurger--active")?.classList.remove("aBurger--active")}),!0),this}}}},415:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});class a{calcScroll(){let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}overflowBody(e="",t=""){document.body.style.overflow=e,document.body.style.marginRight=t?`${t}px`:""}}class s extends a{accept(e){return e(this),this}}class o extends s{constructor(e,t,{closeSelector:n="[data-sumbiot-modal-close]",closeClickOverlay:a=!1,modalGroup:s="[data-sumbiot-modal]",modalParent:o=null,overflowHidden:l=!1,modalDisplay:i="block"}={}){super(),this._trigger=e,this.modal=document.querySelector(t),this._close=this.modal?.querySelector(n),this._closeClickOverlay=a||!this.modal?.dataset.sumbiotOverlay||"true"===this.modal?.dataset.sumbiotOverlay||!1,this._modalGroup=s,this._modalParent=o||this.modal?.dataset.sumbiotParent||!1,this._overflowHidden=l||this.modal?.dataset.sumbiotOverflow&&"true"===this.modal?.dataset.sumbiotOverflow||!1,this._display=i}init(){return this.modal?(this.hideAllModals(),this._showHandler(),this._closeHandler(),this):(console.log("Проверте у всех ли модальных окон, заданы корректные ID"),{})}hideAllModals(e=!1){let t;e?(t=document.querySelectorAll(`${this._modalGroup.slice(0,this._modalGroup.length-1)}${this.modal.dataset.sumbiotModal?`="${this.modal.dataset.sumbiotModal}"`:""}]`),t.length||(t=document.querySelectorAll(this._modalGroup))):t=document.querySelectorAll(this._modalGroup),t.forEach((e=>{e.classList.add("animated","fadeIn"),e.style.display="none"})),this.overflowBody()}_showHandler(){document.querySelector(".aBody").addEventListener("click",(e=>{let t=e.target;(t&&t.matches(this._trigger)||t&&t.parentElement?.matches(this._trigger))&&(e.preventDefault(),e.stopPropagation(),t.parentElement.matches(this._trigger)&&(t=t.parentElement),this._eventTrigger=t,this.show(),setTimeout((()=>t.blur()),150))}),!0)}show(){this.hideAllModals(!0),this._modalPosition(),this.modal.style.display=this._display}_modalPosition(){this._overflowHidden&&this.overflowBody("hidden",this.calcScroll()),this._modalParent&&(this._eventTrigger.closest(this._modalParent)||document.querySelector(this._modalParent)||this._eventTrigger.parentElement).append(this.modal)}_closeHandler(){this._close?.addEventListener("click",(e=>{e.target&&(e.preventDefault(),this.close())})),this.modal?.addEventListener("click",(e=>{e.target&&this._closeModalOverlay(e)})),window.addEventListener("keydown",(e=>{"Escape"!==e.key&&27!==e.keyCode||this.hideAllModals()}))}close(){this.overflowBody(),this.modal.style.display="none"}_closeModalOverlay(e){e.target===this.modal&&this._closeClickOverlay&&(this.overflowBody(),this.modal.style.display="none")}}},934:function(e,t,n){var a,s,o;s=[n(311)],void 0===(o="function"==typeof(a=function(e){var t,n=navigator.userAgent,a=/iphone/i.test(n),s=/chrome/i.test(n),o=/android/i.test(n);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden")&&this.get(0)===document.activeElement)return"number"==typeof e?(t="number"==typeof t?t:e,this.each((function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())}))):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(n,l){var i,r,c,d,u,m,h;if(!n&&this.length>0){var f=e(this[0]).data(e.mask.dataName);return f?f():void 0}return l=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},l),i=e.mask.definitions,r=[],c=m=n.length,d=null,n=String(n),e.each(n.split(""),(function(e,t){"?"==t?(m--,c=e):i[t]?(r.push(new RegExp(i[t])),null===d&&(d=r.length-1),e<c&&(u=r.length-1)):r.push(null)})),this.trigger("unmask").each((function(){var f=e(this),p=e.map(n.split(""),(function(e,t){if("?"!=e)return i[e]?_(t):e})),g=p.join(""),v=f.val();function y(){if(l.completed){for(var e=d;e<=u;e++)if(r[e]&&p[e]===_(e))return;l.completed.call(f)}}function _(e){return e<l.placeholder.length?l.placeholder.charAt(e):l.placeholder.charAt(0)}function b(e){for(;++e<m&&!r[e];);return e}function k(e,t){var n,a;if(!(e<0)){for(n=e,a=b(t);n<m;n++)if(r[n]){if(!(a<m&&r[n].test(p[a])))break;p[n]=p[a],p[a]=_(a),a=b(a)}L(),f.caret(Math.max(d,e))}}function w(e){j(),f.val()!=v&&f.change()}function S(e,t){var n;for(n=e;n<t&&n<m;n++)r[n]&&(p[n]=_(n))}function L(){f.val(p.join(""))}function j(e){var t,n,a,s=f.val(),o=-1;for(t=0,a=0;t<m;t++)if(r[t]){for(p[t]=_(t);a++<s.length;)if(n=s.charAt(a-1),r[t].test(n)){p[t]=n,o=t;break}if(a>s.length){S(t+1,m);break}}else p[t]===s.charAt(a)&&a++,t<c&&(o=t);return e?L():o+1<c?l.autoclear||p.join("")===g?(f.val()&&f.val(""),S(0,m)):L():(L(),f.val(f.val().substring(0,o+1))),c?t:d}f.data(e.mask.dataName,(function(){return e.map(p,(function(e,t){return r[t]&&e!=_(t)?e:null})).join("")})),f.one("unmask",(function(){f.off(".mask").removeData(e.mask.dataName)})).on("focus.mask",(function(){var e;f.prop("readonly")||(clearTimeout(t),v=f.val(),e=j(),t=setTimeout((function(){f.get(0)===document.activeElement&&(L(),e==n.replace("?","").length?f.caret(0,e):f.caret(e))}),10))})).on("blur.mask",w).on("keydown.mask",(function(e){if(!f.prop("readonly")){var t,n,s,o=e.which||e.keyCode;h=f.val(),8===o||46===o||a&&127===o?(n=(t=f.caret()).begin,(s=t.end)-n==0&&(n=46!==o?function(e){for(;--e>=0&&!r[e];);return e}(n):s=b(n-1),s=46===o?b(s):s),S(n,s),k(n,s-1),e.preventDefault()):13===o?w.call(this,e):27===o&&(f.val(v),f.caret(0,j()),e.preventDefault())}})).on("keypress.mask",(function(t){if(!f.prop("readonly")){var n,a,s,l=t.which||t.keyCode,i=f.caret();t.ctrlKey||t.altKey||t.metaKey||l<32||!l||13===l||(i.end-i.begin!=0&&(S(i.begin,i.end),k(i.begin,i.end-1)),(n=b(i.begin-1))<m&&(a=String.fromCharCode(l),r[n].test(a))&&(function(e){var t,n,a,s;for(t=e,n=_(e);t<m;t++)if(r[t]){if(a=b(t),s=p[t],p[t]=n,!(a<m&&r[a].test(s)))break;n=s}}(n),p[n]=a,L(),s=b(n),o?setTimeout((function(){e.proxy(e.fn.caret,f,s)()}),0):f.caret(s),i.begin<=u&&y()),t.preventDefault())}})).on("input.mask paste.mask",(function(){f.prop("readonly")||setTimeout((function(){var e=j(!0);f.caret(e),y()}),0)})),s&&o&&f.off("input.mask").on("input.mask",(function(e){var t=f.val(),n=f.caret();if(h&&h.length&&h.length>t.length){for(j(!0);n.begin>0&&!r[n.begin-1];)n.begin--;if(0===n.begin)for(;n.begin<d&&!r[n.begin];)n.begin++;f.caret(n.begin,n.begin)}else{j(!0);var a=t.charAt(n.begin);n.begin<m&&(r[n.begin]||n.begin++,r[n.begin].test(a)&&n.begin++),f.caret(n.begin,n.begin)}y()})),j()}))}})})?a.apply(t,s):a)||(e.exports=o)},758:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,{modals:t=[]}={})=>{const n=document.querySelector(e);n.addEventListener("click",(e=>{t.forEach((e=>e.close())),n.classList.toggle("aBurger--active")}))}},494:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(311));n(414),t.default=()=>{!function(){s.default.datepicker.regional.ru={closeText:"Закрыть",prevText:"Предыдущий",nextText:"Следующий",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},s.default.datepicker.setDefaults(s.default.datepicker.regional.ru);const e=(0,s.default)(".js-datepicker");e.datepicker({onSelect:function(e){(0,s.default)(this).children("input").first().val(e),(0,s.default)(this).find(".ui-datepicker-inline").hide()}});const t=(0,s.default)(".ui-datepicker-inline");t.hide(),e.on("click",(function(){t.hide(),(0,s.default)(this).find(".ui-datepicker-inline").show()})),document.querySelector(".aBody").addEventListener("click",(function(e){const n=e.target;n&&n.closest(".ui-datepicker-inline")||n&&n.closest(".js-input")||n&&n.closest(".ui-corner-all")||t.hide()})),document.querySelector(".aBody").addEventListener("keydown",(e=>{"Escape"!==e.key&&27!==e.keyCode||t.hide()}))}()}},787:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(311));n(934),t.default=()=>{(0,s.default)(".js-input").mask("99.99.9999")}},83:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(465),s=n(420);t.default=e=>{new MutationObserver((e=>{e.forEach((e=>{if("childList"===e.type)for(let t of e.addedNodes){if(!(t instanceof HTMLElement))continue;if(!t.classList.contains("aContent__item"))continue;const e=t.querySelector(".aNews__content");e.scrollHeight>199&&e.insertAdjacentHTML("beforeend",(0,a.unwrapTemplate)());const n=t.querySelector(".js-comments"),o=n.querySelectorAll(".js-comment");if(o.length>1){o[o.length-1].classList.add("aComment--after");for(let e=0;e<o.length-1;e++)o[e].style.display="none";n.insertAdjacentHTML("afterbegin",(0,s.unwrapCommentsTemplate)(o.length-1))}t.querySelectorAll("oembed[url]").forEach((e=>{const t=document.createElement("a");t.setAttribute("href",e.getAttribute("url")),t.className="embedly-card",e.appendChild(t)}))}}))})).observe(document.querySelector(e),{childList:!0,subtree:!0}),document.querySelector(".aBody").addEventListener("click",(e=>{var t;const n=e.target;if(n&&n.classList.contains("js-unwrap-idea")){const e=n.closest(".aNews__content"),t=n.closest(".aUnwrap");t.classList.contains("active")?(t.classList.remove("active"),e.style.maxHeight="199px"):(t.classList.add("active"),e.style.maxHeight=e.scrollHeight+10+"px")}if(n&&n.classList.contains("js-comments-hide")){e.preventDefault();const t=n.closest(".js-comments").querySelectorAll(".js-comment");for(let e=0;e<t.length;e++)t[e].style.display="none";n.innerHTML="Предыдущие комментарии (<span></span>)",n.classList.remove("js-comments-hide")}if(n&&n.classList.contains("js-unwrap-comments")){e.preventDefault();const a=n.closest(".js-comments").querySelector(".aNews__comments-inner"),s=a.querySelectorAll('[style*="none"]'),o=a.querySelectorAll(".js-comment");if(null===(t=a.querySelector(".aComment--after"))||void 0===t||t.classList.remove("aComment--after"),s.length===o.length)s[s.length-1].style.display="flex",s[s.length-1].classList.add("aComment--after"),n.querySelector("span").innerHTML=""+(s.length-1);else if(s.length>2){for(let e=s.length-1;e>s.length-3;e--)s[e].style.display="flex";s[s.length-2].classList.add("aComment--after"),n.querySelector("span").innerHTML=""+(s.length-2)}else{for(let e=0;e<s.length;e++)s[e].style.display="flex";n.innerHTML="Скрыть комментарии",n.classList.add("js-comments-hide")}}n&&n.classList.contains("js-textarea-add-comment")&&n.closest(".aNews__new-comment-inner").classList.add("active"),n&&n.classList.contains("js-reset-add-comment")&&(n.closest(".aNews__new-comment-inner").classList.remove("active"),n.closest(".js-form-add-comment").reset())}))}},84:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(311));n(686),t.default=()=>{const e={debug:!1,disabled:!1,multiple:!1,selectOnClose:!1,selectionCssClass:"sSelect",dropdownCssClass:"sSelect-dropdown",theme:"default",minimumResultsForSearch:10,language:Object.assign({},{searching:function(){return"Поиск..."},noResults:function(){return"Совпадений не найдено"},loadingMore:function(){return"Загрузка…"},errorLoading:function(){return"Результаты не удалось загрузить"},maximumSelected:function(e){return"Вы можете выбрать не более "+e.maximum+" элемент"+(1===e.maximum?"a":"ов")}})};s.default.fn.select2.defaults.set("width","100%"),(0,s.default)(".js-select2").select2(Object.assign({placeholder:"Введите дивыизион"},e)),document.querySelector("#form-search").addEventListener("reset",(e=>{(0,s.default)(".js-select2").val(-1).trigger("change"),(0,s.default)(".js-select2-elma").val(-1).trigger("change")}))}},59:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(311)),o=a(n(415)),l=a(n(494)),i=a(n(787)),r=a(n(84)),c=a(n(758)),d=a(n(83)),u=a(n(953));(0,s.default)(document).ready((function(){const e=new o.default(".js-search-modal","#modal-search").init().accept(u.default.modalSearchMod).upgrade();(0,c.default)(".aBurger",{modals:[e]}),(0,l.default)(),(0,i.default)(),(0,r.default)(),(0,d.default)(".js-observer")}))},420:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapCommentsTemplate=void 0,t.unwrapCommentsTemplate=function(e){return`\n    <div class="aNews__unwrap-comments">\n      <button class="js-unwrap-comments">Предыдущие комментарии (<span>${e}</span>)</button>\n    </div>\x3c!-- ./aNews__unwrap-comments--\x3e\n  `}},465:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapTemplate=void 0,t.unwrapTemplate=function(){return'\n    <div class="aNews__aUnwrap aUnwrap">\n      <button class="aUnwrap__btn aBtn aBtn--icon js-unwrap-idea" title="Развернуть"></button>\n    </div>\x3c!--./aUnwrap--\x3e\n  '}}},function(e){e.O(0,[186,894],(function(){return 59,e(e.s=59)})),e.O()}]);
//# sourceMappingURL=news.js.map